CREATE TABLE Productos(
Id INT IDENTITY (1,1) PRIMARY KEY,
Nombre NVARCHAR (100) NOT NULL,
Precio DECIMAL (10,2) NOT NULL CHECK (Precio >= 0),
Stock INT NOT NULL DEFAULT 0 CHECK (Stock >= 0)
);

CREATE TABLE Clientes (
Id INT IDENTITY (1,1) PRIMARY KEY,
Nombre NVARCHAR (100) NOT NULL,
Email NVARCHAR (100) NOT NULL UNIQUE
);

CREATE TABLE Ventas (
Id INT IDENTITY (1,1) PRIMARY KEY,
Fecha DATETIME2 NOT NULL DEFAULT GETDATE(),
ClientId INT NOT NULL,
CONSTRAINT FK_Ventas_Clientes FOREIGN KEY (ClientId) REFERENCES Clientes(Id)
	ON DELETE NO ACTION
	ON UPDATE CASCADE
);

CREATE TABLE DetalleVenta (
Id INT IDENTITY (1,1) PRIMARY KEY,
VentaId INT NOT NULL,
ProductId INT NOT NULL,
Cantidad INT NOT NULL CHECK (Cantidad > 0),
PrecioUnitario DECIMAL (10,2) NOT NULL CHECK (PrecioUnitario >= 0),
CONSTRAINT FK_DetalleVenta_Ventas FOREIGN KEY (VentaId) REFERENCES Ventas(Id)
	ON DELETE NO ACTION
	ON UPDATE CASCADE,
CONSTRAINT FK_DetalleVenta_Productos FOREIGN KEY (ProductId) REFERENCES Productos(Id)
	ON DELETE NO ACTION
	ON UPDATE CASCADE
);